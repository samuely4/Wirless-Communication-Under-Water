process the logfiles using SED/AWK


write a script to automatically run the test using
different parameters 

run the program multiple times using different config files

what is the maximum speed you can get with the least power?

max throughput with least amount of power.


2 things

1. the modem has several modes--- mode 0 is the slowest -- higher 
modes means faster sending speeds --- test several speeds

for each mode, the max number of bytes that can be sent out is different
to get the max speed, want the modem to keep sending but each 

physical layer (frame) -- total number of bytes that can be sent out in one shot

check table (physical layer frame length)

different modes have different length

to get max speed -- have to send out the max number of bytes

also, we have some overheads

-- each data has a specific prefix time stamp etc--- that is overhead

another point to pay attention

we communicate with the modem through the serial port

send the command over the ser port-- modem recieves the command

on the recieving end, the modem decodes the messages and send it back to the modem

instead of using 9600, change the baud rate 115200. this way we can reduce
the amount of time it takes to send the command to the device

use this rate for both modems

extra steps to analyze data:

1- be able to estimate the clock drift between the two machines

two cmps 1- offset   2- clock skew  how fast is the clock faster of slower

if experiment runs for long time in that case. the clock drift will make a difference

in that case we need to correct the clock drift

to do that 

t0 -- refrence time sender's clock is t0

time in the recieving side is t1

we need to do is to find out A and b

examine two messages: we have two t0s and two t1

T1=a+bT0

two equations and two unknowns

this formula assumes that two cmps are constants, in real life they are not

for this calcu, we can use the moving average of A and B

after we have the average of A and B, you will be able to corrent the time in the 
rec side call it T1'

throughput calc--- we need to use the T1' and T0

once you can do that for single exp, write a script to run exp for multiple times

for each config file, run the test, in each time we send say 200 packets

run it for ten times

after each run, need to calculate the throughput

after ten runs, ten throughtput corresponding to the same setting

calculate the average throughtput for all ten runs. 

that is the data point corresponding to this config

after that change the config and do that all over the again



design the test.....

objective find out max speed with lowest power level

the higher the mode, the faster the sending rate is

it is more likely to have packet loss with faster speed

at lowest rate, most reliable -- no loss

power level...

open water---- higher power level is better reception

tank--- tank wall. if the pwlevel is very high---sound signals are reflected


design of exp:
need to think 

first test is going to be in the tank
design the parameters around that

at the end

set of figures explaining:

relationship between throughtput/pwlevel/loss rate/transimission modes
 

you do not need to test power level 0

gnuplot --- command line tool to plot figures

good thing-- write script to do plotting

plot all the figures using one script

command cron in linux ---- schedule a task in specific time

need to create two sets of those scripts one for the sender / one of the rec

change the parameter for the sending script
processing the result for the rec script

you can calc loss rate from the log files.

can change the power level 10 times. search and change the power level to a certain value


use two levels of scripts 

test script --- for each single setting of the 50 settings
top level exp script


find out what is the maximum rate with regard to power level

use the max packet length 

look at page 8---- the first 5 modes to be tested